#!/bin/bash

git_fetch() {
    find . -type d -name '.git' -print0 | while IFS= read -r -d '' gitdir; do
        repo="$(dirname "$(realpath -s "${gitdir}")")"
        test -d "${repo}" || {
            cd "${repo}" || return
            git fetch --all
            cd - || return
    done
}

git_fetch "$@"
